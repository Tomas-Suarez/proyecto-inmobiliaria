@model proyecto_inmobiliaria.Dtos.request.PagoRequestDTO

@{
    bool crearPago = Model.IdPago == 0;
    ViewData["Title"] = crearPago ? "Registrar Pago" : "Editar Pago";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="@(crearPago ? "Crear" : "Modificar")" method="post">
    <input type="hidden" asp-for="IdPago" />
    <input type="hidden" asp-for="IdContrato" />
    <input type="hidden" name="esFinalizacion" value="@(ViewData["EsFinalizacion"]?.ToString()!.ToLower() ?? "false")" />


    <div class="form-group">
        <label asp-for="NumeroPago" class="control-label">Número de Pago</label>
        <input asp-for="NumeroPago" class="form-control" readonly />
    </div>

    <div class="form-group">
        <label asp-for="Monto" class="control-label">Monto</label>
        <input asp-for="Monto" class="form-control" type="number" step="0.01" readonly />
        <input type="hidden" asp-for="Monto" />
    </div>

    <div class="form-group">
        <label asp-for="FechaPago" class="control-label">Fecha de Pago</label>
        @if (crearPago)
        {
            <input asp-for="FechaPago" class="form-control" type="date"
                   value="@(Model.FechaPago.HasValue ? Model.FechaPago.Value.ToString("yyyy-MM-dd") : string.Empty)" />
        }
        else
        {
            <input asp-for="FechaPago" class="form-control" type="date" disabled="disabled"
                   value="@(Model.FechaPago.HasValue ? Model.FechaPago.Value.ToString("yyyy-MM-dd") : string.Empty)" />
            <input type="hidden" asp-for="FechaPago"
                   value="@(Model.FechaPago.HasValue ? Model.FechaPago.Value.ToString("yyyy-MM-dd") : string.Empty)" />
        }
        <span asp-validation-for="FechaPago" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="MetodoPago" class="control-label">Método de Pago</label>
        @if (crearPago)
        {
            <select asp-for="MetodoPago" class="form-control">
                <option value="">-- Seleccionar --</option>
                <option value="Efectivo">Efectivo</option>
                <option value="Transferencia">Transferencia</option>
                <option value="Tarjeta">Tarjeta</option>
            </select>
        }
        else
        {
            <select asp-for="MetodoPago" class="form-control" disabled="disabled">
                <option value="">-- Seleccionar --</option>
                <option value="Efectivo">Efectivo</option>
                <option value="Transferencia">Transferencia</option>
                <option value="Tarjeta">Tarjeta</option>
            </select>
            <input type="hidden" asp-for="MetodoPago" />
        }
        <span asp-validation-for="MetodoPago" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Detalle" class="control-label">Detalle</label>
        <textarea asp-for="Detalle" class="form-control" rows="3"></textarea>
        <span asp-validation-for="Detalle" class="text-danger"></span>
    </div>

    <button type="submit" class="btn btn-primary">Guardar</button>
    <a asp-action="Index" asp-route-idContrato="@Model.IdContrato" class="btn btn-secondary">Cancelar</a>
</form>